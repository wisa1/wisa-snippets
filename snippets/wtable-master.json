{
    "Master Table with No. Series": {
        "prefix": "wtable-master",
        "scope": "al",
        "body": [
            "table ${1:id} ${2:MyTable}",
            "{",
            "\tDataClassification = ${3|ToBeClassified,CustomerContent,EndUserIdentifiableInformation,AccountData,EndUserPseudonymousIdentifiers,OrganizationIdentifiableInformation,SystemMetadata|};",
            "\t",
            "\t#region fields",
            "\tfields",
            "\t{",
            "\t\tfield(1;\"No.\"; Code[20])",
            "\t\t{",
            "\t\t\tDataClassification = ${3:DataClassification};",
            "\t\t\ttrigger OnValidate()",
            "\t\t\tbegin",
            "\t\t\t\tif \"No.\" <> xRec.\"No.\" then begin",
            "\t\t\t\t\tSetup.Get();",
            "\t\t\t\t\tNoSeriesMgt.TestManual(Setup.\"Master Nos.\");",
            "\t\t\t\t\t\"No. Series\" := '';",
            "\t\t\t\tend;",
            "\t\t\tend;",
            "\t\t}",
            "\t\tfield(2; Name; Text[100])",
            "\t\t{",
            "\t\t\tDataClassification = ${3:DataClassification};",
            "\t\t\ttrigger OnValidate()",
            "\t\t\tbegin",
            "\t\t\t\tif (\"Search Name\" = UpperCase(xRec.Name)) or (\"Search Name\" = '') then",
            "\t\t\t\t\t\"Search Name\" := CopyStr(Name, 1, MaxStrLen(\"Search Name\"));",
            "\t\t\tend;",
            "\t\t}",
            "\t\tfield(3; \"Search Name\"; Code[100])",
            "\t\t{",
            "\t\t\tDataClassification = ${3:DataClassification};",
            "\t\t}",
            "\t\tfield(4; \"Name 2\"; Text[50])",
            "\t\t{",
            "\t\t\tDataClassification = ${3:DataClassification};",
            "\t\t}",
            "\t\tfield(5; Blocked; Boolean)",
            "\t\t{",
            "\t\t\tDataClassification = ${3:DataClassification};",
            "\t\t}",
            "\t\tfield(6; \"Last Date Modified\"; Date)",
            "\t\t{",
            "\t\t\tDataClassification = ${3:DataClassification};",
            "\t\t\tEditable = false;",
            "\t\t}",
            "\t\tfield(7; \"No. Series\"; Code[20])",
            "\t\t{",
            "\t\t\tDataClassification = CustomerContent;",
            "\t\t\tEditable = false;",
            "\t\t\tTableRelation = \"No. Series\";",
            "\t\t}",
            "\t}",
            "\t#endregion fields",
            "\t",
            "\t#region keys",
            "\tkeys",
            "\t{",
            "\t\tkey(Key1; \"No.\")",
            "\t\t{",
            "\t\t\tClustered = true;",
            "\t\t}",
            "\t}",
            "\t#endregion keys",
            "\t",
            "\t#region vars",
            "\tvar",
            "\t\tSetup: Record ${10:SetupTable};",
            "\t\tNoSeriesMgt: Codeunit NoSeriesManagement;",
            "\t#endregion vars",
            "\t",
            "\t#region triggers",
            "\ttrigger OnInsert()",
            "\tvar",
            "\t\tIsHandled: Boolean;",
            "\tbegin",
            "\t\tOnBeforeInsert(Rec, IsHandled);",
            "\t\tif IsHandled then",
            "\t\t\texit;",
            "\t\t",
            "\t\tif \"No.\" = '' then begin",
            "\t\t\tSetup.Get();",
            "\t\t\tSetup.TestField(\"Master Nos.\");",
            "\t\t\tNoSeriesMgt.InitSeries(Setup.\"Master Nos.\", xRec.\"No. Series\", 0D, \"No.\", \"No. Series\");",
            "\t\tend;",
            "\tend;",
            "\t#endregion triggers",
            "\t",
            "\t#region procedures",
            "\tprocedure AssistEdit(OldMaster: Record ${2:MyTable}): Boolean",
            "\tvar",
            "\t\tMaster: Record ${2:MyTable};",
            "\tbegin",
            "\t\tMaster := Rec;",
            "\t\tSetup.Get();",
            "\t\tSetup.TestField(\"Master Nos.\");",
            "\t\tif NoSeriesMgt.SelectSeries(Setup.\"Master Nos.\", OldMaster.\"No. Series\", \"No. Series\") then begin",
            "\t\t\tNoSeriesMgt.SetSeries(Master.\"No.\");",
            "\t\t\tRec := Master;",
            "\t\t\tOnAssistEditOnBeforeExit(Master);",
            "\t\t\texit(true);",
            "\t\tend;",
            "\tend;",
            "\t#endregion triggers",
            "\t",
            "\t#region events",
            "\t[IntegrationEvent(false, false)]",
            "\tlocal procedure OnBeforeInsert(var Rec: Record ${2:MyTable}; var IsHandled: Boolean)",
            "\tbegin",
            "\tend;",
            "\t",
            "\t[IntegrationEvent(false, false)]",
            "\tlocal procedure OnAssistEditOnBeforeExit(var Rec: Record ${2:MyTable})",
            "\tbegin",
            "\tend;",
            "\t#endregion events",
            "}"
        ],
        "description": "Snippet: Master Table + NoSeries"
    }
}